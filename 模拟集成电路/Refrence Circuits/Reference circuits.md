变化因素(PVT)：供电电压、温度、工艺

![[Pasted image 20240317162351.png]]



需要提供的稳定因素：电压、电流、跨导gm、阻抗、增益、跨压（IR drop/swing）、频率、





![[Pasted image 20240317163304.png]]
电路上面的二极管接法左边复制右边的电流，下边的二极管接法又右边复制左边的电流。这样的话电流不太好定义，于是加一个电阻
![[Pasted image 20240317163803.png]]
上边P管的尺寸还是一样，但是下边左侧有Rs的存在使得M1和M2尺寸有差异，M2的尺寸要比M1大，这里设为K倍。


推导电流的前提条件
![[Pasted image 20240317164100.png]]
推导结果
可以看到电流和供电电压无关
![[Pasted image 20240317164229.png]]


这个电路我们还要设置启动部分才能避免电流为0的情况
![[Pasted image 20240317164627.png]]
这里加入了一个二极管作为启动部分，当然也可替换为二极管接法的MOS管。![[Pasted image 20240317164922.png]]


还要注意一点的是，如果I1、I2要尽量保持一致的话需要增加M3、M4的等效输出电阻ro，来增大M3、M4的Vds电压，这样留给下面部分的电压就比较少。要增大ro需要通过增大MOS的长L来实现，如果要实现输出同样的电流话那宽度W也要增大来保持宽长比（W/L）不变，这样面积也增大了。
![[Pasted image 20240317170045.png]]

这里我们再把电流源引出来到差放中
![[Pasted image 20240317172336.png]]
M5宽长比（W/L）是M1的2倍，那么流过M5的静态电流Ids为两倍的I1。

由公式
![[Pasted image 20240317171013.png]]

可得M6和M7的跨导表达式
![[Pasted image 20240317171113.png]]
我们假设M6、M7的宽长比与M1、M2的相同，简化后可得
$$g_{m6,7}=2   \cdot   \frac{1}{R_s}   \cdot   (1-   \frac{1}{\sqrt[]{K}})$$
可以看到跨导只和Rs与K有关

增益为
![[Pasted image 20240317172253.png]]
